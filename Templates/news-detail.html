{% extends 'layout.html' %}
{% load static %}
{% load i18n %}

{% block title %}
    Daşınmaz.az | {{news_detail.title}}
{% endblock title %}

{% block container %}
    <section class="sidebar-page-container blog-details sec-pad-2">
        <div class="auto-container">
            <div class="row clearfix">
                <div class="col-lg-8 col-md-12 col-sm-12 content-side">
                    {% if news_detail %}
                        <div class="blog-details-content">
                            <div class="news-block-one">
                                <div class="inner-box">
                                    {% if news_detail.cover %}
                                        <div class="image-box">
                                            <figure class="image"><img src="{{news_detail.cover.url}}" alt=""></figure> 
                                            <a class="category bg-success" href="{% url 'like-news' news_detail.id %}"> 
                                                {% if liked_it %}
                                                    <i class="fa-solid fa-heart"></i>
                                                {% else %}
                                                    <i class="fa-regular fa-heart"></i> 
                                                {% endif %}
                                            </a>
                                        </div>
                                    {% endif %}
                                    <div class="lower-content"> 
                                        <div class="price-box clearfix">
                                            {% if likes_count > 0 %}
                                                <div class="price-info pull-left">
                                                    <h6 class="text-danger">Bəyənmə sayı <i class="fa-solid fa-heart"></i></h6>
                                                    <h4 class="text-danger">{{likes_count}}</h4>
                                                </div>
                                            {% endif %}
                                            
                                            <ul class="other-option pull-right clearfix">
                                                <li><a class="text-success" id="share-news"><i class="icon-12"></i></a></li> 
                                            </ul>
                                        </div>
                                        <h3>{{news_detail.title}}</h3>
                                        <ul class="post-info clearfix"> 
                                            <li>
                                                {% language 'az' %}
                                                    {{news_detail.created_at|date:"d M, Y"}}
                                                {% endlanguage %}
                                            </li>
                                        </ul>
                                        <div class="text">
                                            {{news_detail.description|safe}}
                                        </div>
                                        <div class="post-tags">
                                            <ul class="tags-list clearfix">
                                                <li><h5>Teqlər:</h5></li>
                                                {% for tag in news_detail.tags.all %}
                                                    <li><a href="javascript:void(0)">{{tag}}</a></li>
                                                {% endfor %} 
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div> 
                        </div>
                    {% endif %}
                </div>
                <div class="col-lg-4 col-md-12 col-sm-12 sidebar-side">
                    <div class="blog-sidebar">
                        <div class="sidebar-widget search-widget">
                            <div class="widget-title">
                                <h4>Xəbərlərdə axtarış et</h4>
                            </div>
                            <div class="search-inner">
                                <form action="blog-1.html" method="post">
                                    <div class="form-group">
                                        <input type="search" name="search_field" placeholder="Nə axtarırsınız ?" required="">
                                        <button type="submit"><i class="fas fa-search"></i></button>
                                    </div>
                                </form>
                            </div>
                        </div>
                          
                        {% if tags %}
                            <div class="sidebar-widget tags-widget">
                                <div class="widget-title">
                                    <h4>Teqlər :</h4>
                                </div>
                                <div class="widget-content">
                                    <ul class="tags-list clearfix">
                                        {% for tag in tags %}
                                            <li><a href="javascript:void(0)">{{tag.name}}</a></li> 
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>
                        {% endif %}
                        
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock container %}


{% block scripts %}
    <script>
        let share_news_btn = document.getElementById("share-news")
        share_news_btn.addEventListener("click", async () => {
            try {
                await navigator.share({
                    title: "Xəbəri paylaş",
                    text: "Saytımızdakı xəbərləri yaxınlarınızla paylaşın",
                    url: "{{share_url}}",
                }); 
            } catch (err) { 
                swal("Məlumat!", "Xəbər paylaşılmadı.", "info") 
            }
        });
    </script>
{% endblock scripts %}